<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marcho</title>
    <link rel="stylesheet" href="css/index.min.css">
</head>

<body>

    {% include 'app/module/_header/_header.html' %}

    <main class="main">

    {% include 'app/module/_top-slider/_top-slider.html' %}
    {% include 'app/module/_categories-info/_categories-info.html' %}
    {% include 'app/module/_video-fashion/_video-fashion.html' %}
    {% include 'app/module/_product/_product.html' %}
    {% include 'app/module/_promo/_promo.html' %}
    {% include 'app/module/_partners/_partners.html' %}
    {% include 'app/module/_blog/_blog.html' %}
    
    </main>

    {% include 'app/module/_footer/_footer.html' %}
    
    <script src="js/main.min.js"></script>
    <script>
        $(function () {
            function getTimeRemaining(endtime) {
                const total = Date.parse(endtime) - Date.parse(new Date());
                const seconds = Math.floor((total / 1000) % 60);
                const minutes = Math.floor((total / 1000 / 60) % 60);
                const hours = Math.floor((total / (1000 * 60 * 60)) % 24);
                const days = Math.floor(total / (1000 * 60 * 60 * 24));

                return {
                    total,
                    days,
                    hours,
                    minutes,
                    seconds
                };
            }

            function initializeClock(id, endtime) {
                const clock = document.querySelector('.promo__clock');
                const daysSpan = clock.querySelector('.promo__days');
                const hoursSpan = clock.querySelector('.promo__hours');
                const minutesSpan = clock.querySelector('.promo__minutes');
                const secondsSpan = clock.querySelector('.promo__seconds');

                function updateClock() {
                    const t = getTimeRemaining(endtime);

                    daysSpan.innerHTML = t.days;
                    hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
                    minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
                    secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

                    if (t.total <= 0) {
                        clearInterval(timeinterval);
                    }
                }

                updateClock();
                const timeinterval = setInterval(updateClock, 1000);
            }

            const deadline = $('.promo__clock').attr('data-time');
            initializeClock('.promo__clock', deadline);
        });
    </script>
</body>

</html>